#!/usr/bin/env node

const yargs = require('yargs')
const open = require('open')
const match = require('match-values').default

const argv = yargs.usage('Open a web app in the default browser \n\nUsage: $0 [options]')
  .help('help').alias('help', 'h')
  .version('version', '1.0.0').alias('version', 'V')
  .options({
    'about': {
      description: 'Provide some details about the author of this program',
      boolean: true,
      alias: 'a',
    },
    'name': {
      description: 'Provide the application name',
      alias: 'n'
    }
  })
  .example('web-apps icloud', 'open Apple iCloud')
  .showHelpOnFail(false, 'whoops, something went wrong! run with --help')
  .argv

if (argv.about) {
  console.log('Loc Phan <phanhoangloc@gmail.com>')
  process.exit(0)
}

if (argv.name) {
  const url = match(argv.name, {
    // Apple
    icloud: 'https://www.icloud.com',
    reminders: 'https://www.icloud.com/#reminders',
    notes: 'https://www.icloud.com/#notes3',
    contacts: 'https://www.icloud.com/#contacts',
    calendar: 'https://www.icloud.com/#calendar',
    // Google
    keep: 'https://keep.google.com/u/0/',
    youtube: 'https://www.youtube.com',
    mail: 'https://mail.google.com/',
    translate: 'https://translate.google.com',
    drive: 'https://drive.google.com',
    'g-contacts': 'https://contacts.google.com',
    'g-photos': 'https://photos.google.com',
    // Work
    gh: 'https://github.com/phanhoangloc',
    gitlab: 'https://gitlab.com/dashboard/',
    bitbucket: 'https://bitbucket.org/dashboard/overview',
    // Edu
    egghead: 'https://egghead.io',
    'fe-master': 'https://frontendmasters.com/dashboard/',
    treehouse: 'https://teamtreehouse.com/library',
    'plural-s': 'https://www.pluralsight.com',
    'pure-f': 'https://purelyfunctional.tv/',
    'code-cademy': 'https://www.codecademy.com/catalog/subject/all',
    aba: 'https://campus.abaenglish.com/en',
    // Finance
    money: 'https://web.moneylover.me',
    hsbc: 'https://www.hsbc.com.vn/vi-vn/security/',
    vcb: 'https://www.vietcombank.com.vn/IBanking2015/',
    sc: 'https://vn.online.standardchartered.com/login/IBank?ser=100&act=MainFrame_VN.jsp&ccode=VN&isSecured=false&countryCode=VN&cntryCode=VN',
    // Flights
    vietjet: 'https://www.vietjetair.com/Sites/Web/vi-VN/Home',
    vna: 'https://www.vietnamairlines.com/vn/vi/home',
    // Shopping
    tiki: 'https://tiki.vn/sales/order/history?src=header_my_account',
    _: ''
  })

  if (!url) {
    console.error('Invalid app name!')
    process.exit(-1)
  }

  open(url)
  process.exit(0)
}
